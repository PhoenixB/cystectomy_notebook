<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Results | R Notebook for the cystectomy study</title>
  <meta name="description" content="3 Results | R Notebook for the cystectomy study" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Results | R Notebook for the cystectomy study" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Results | R Notebook for the cystectomy study" />
  
  
  

<meta name="author" content="Pascal Jerney" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="prerequisites.html"/>
<link rel="next" href="methods.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Index</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#table-1"><i class="fa fa-check"></i><b>1.1</b> Table 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a><ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html#formulas"><i class="fa fa-check"></i><b>2.1</b> Formulas</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>3</b> Results</a><ul>
<li class="chapter" data-level="3.1" data-path="results.html"><a href="results.html#data-plots"><i class="fa fa-check"></i><b>3.1</b> Data plots</a></li>
<li class="chapter" data-level="3.2" data-path="results.html"><a href="results.html#model-outputs"><i class="fa fa-check"></i><b>3.2</b> Model outputs</a><ul>
<li class="chapter" data-level="3.2.1" data-path="results.html"><a href="results.html#models-with-intraoperative-transfusion-as-response"><i class="fa fa-check"></i><b>3.2.1</b> Models with intraoperative transfusion as response</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Notebook for the cystectomy study</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results" class="section level1">
<h1><span class="header-section-number">3</span> Results</h1>
<div id="data-plots" class="section level2">
<h2><span class="header-section-number">3.1</span> Data plots</h2>
<p><img src="notebook_files/figure-html/data_plots-1.png" width="100%" style="display: block; margin: auto;" /><img src="notebook_files/figure-html/data_plots-2.png" width="100%" style="display: block; margin: auto;" /><img src="notebook_files/figure-html/data_plots-3.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="model-outputs" class="section level2">
<h2><span class="header-section-number">3.2</span> Model outputs</h2>
<div id="models-with-intraoperative-transfusion-as-response" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Models with intraoperative transfusion as response</h3>
<div id="stepwise-logistic-regression" class="section level4">
<h4><span class="header-section-number">3.2.1.1</span> Stepwise Logistic Regression</h4>
<pre><code>#&gt; Warning: The `yardstick.event_first` option has been deprecated as of yardstick 0.0.7 and will be completely ignored in a future version.
#&gt; Instead, set the following argument directly in the metric function:
#&gt; `options(yardstick.event_first = TRUE)`  -&gt; `event_level = &#39;first&#39;` (the default)
#&gt; `options(yardstick.event_first = FALSE)` -&gt; `event_level = &#39;second&#39;`
#&gt; This warning is displayed once per session.
#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  Stepwise Logistic Regression 
#&gt;   -&gt; data              :  115  rows  15  cols 
#&gt;   -&gt; data              :  tibble converted into a data.frame 
#&gt;   -&gt; target variable   :  115  values 
#&gt;   -&gt; predict function  :  yhat.workflow  will be used ( [33m default [39m )
#&gt;   -&gt; predicted values  :  numerical, min =  0.000498781 , mean =  0.3052543 , max =  0.9999999  
#&gt;   -&gt; model_info        :  package tidymodels , ver. 0.1.2 , task classification ( [33m default [39m ) 
#&gt;   -&gt; model_info        :  type set to  classification 
#&gt;   -&gt; residual function :  difference between y and yhat ( [33m default [39m )
#&gt;   -&gt; residuals         :  numerical, min =  -0.8354279 , mean =  0.007789202 , max =  0.9503014  
#&gt;  [32m A new explainer has been created! [39m</code></pre>
<div id="model-performance" class="section level5">
<h5><span class="header-section-number">3.2.1.1.1</span> Model performance</h5>
<table>
<caption>(#tab:ml_glm_mp)Metrics from bootstrapping</caption>
<thead>
<tr class="header">
<th align="left">.metric</th>
<th align="right">.estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">accuracy</td>
<td align="right">0.826</td>
</tr>
<tr class="even">
<td align="left">my_brier</td>
<td align="right">0.127</td>
</tr>
<tr class="odd">
<td align="left">roc_auc</td>
<td align="right">0.872</td>
</tr>
<tr class="even">
<td align="left">sens</td>
<td align="right">0.651</td>
</tr>
<tr class="odd">
<td align="left">spec</td>
<td align="right">0.908</td>
</tr>
</tbody>
</table>
<table>
<caption>(#tab:ml_glm_mp)Metrics from testing dataset</caption>
<thead>
<tr class="header">
<th align="left">.metric</th>
<th align="left">.estimator</th>
<th align="right">.estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">accuracy</td>
<td align="left">binary</td>
<td align="right">0.800</td>
</tr>
<tr class="even">
<td align="left">sens</td>
<td align="left">binary</td>
<td align="right">0.556</td>
</tr>
<tr class="odd">
<td align="left">spec</td>
<td align="left">binary</td>
<td align="right">0.911</td>
</tr>
<tr class="even">
<td align="left">roc_auc</td>
<td align="left">binary</td>
<td align="right">0.864</td>
</tr>
<tr class="odd">
<td align="left">my_brier</td>
<td align="left">binary</td>
<td align="right">0.136</td>
</tr>
</tbody>
</table>
<table>
<caption>(#tab:ml_glm_mp)Optimal threshold</caption>
<thead>
<tr class="header">
<th align="right">.threshold</th>
<th align="right">distance</th>
<th align="right">sens</th>
<th align="right">spec</th>
<th align="right">distance_abs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.319</td>
<td align="right">0.098</td>
<td align="right">0.785</td>
<td align="right">0.783</td>
<td align="right">0.01</td>
</tr>
</tbody>
</table>
</div>
<div id="coefficients" class="section level5">
<h5><span class="header-section-number">3.2.1.1.2</span> Coefficients</h5>
<p><img src="notebook_files/figure-html/ml_glm_coef_plot-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

#&gt; Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred

#&gt; Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
<th align="right">conf.low</th>
<th align="right">conf.high</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.3840</td>
<td align="right">0.1559</td>
<td align="right">-6.1391</td>
<td align="right">0.0000</td>
<td align="right">0.2813</td>
<td align="right">0.5188</td>
</tr>
<tr class="even">
<td align="left">blood_loss_ratio</td>
<td align="right">6.5717</td>
<td align="right">0.1520</td>
<td align="right">12.3828</td>
<td align="right">0.0000</td>
<td align="right">4.9224</td>
<td align="right">8.9387</td>
</tr>
<tr class="odd">
<td align="left">oakyes</td>
<td align="right">2.7007</td>
<td align="right">0.4297</td>
<td align="right">2.3120</td>
<td align="right">0.0208</td>
<td align="right">1.1524</td>
<td align="right">6.2622</td>
</tr>
<tr class="even">
<td align="left">preop_hb</td>
<td align="right">0.3155</td>
<td align="right">0.1097</td>
<td align="right">-10.5167</td>
<td align="right">0.0000</td>
<td align="right">0.2530</td>
<td align="right">0.3891</td>
</tr>
<tr class="odd">
<td align="left">age</td>
<td align="right">1.6782</td>
<td align="right">0.1000</td>
<td align="right">5.1758</td>
<td align="right">0.0000</td>
<td align="right">1.3843</td>
<td align="right">2.0500</td>
</tr>
<tr class="even">
<td align="left">p_tumor.L</td>
<td align="right">2.0670</td>
<td align="right">0.2300</td>
<td align="right">3.1574</td>
<td align="right">0.0016</td>
<td align="right">1.3194</td>
<td align="right">3.2538</td>
</tr>
<tr class="odd">
<td align="left">p_tumor.Q</td>
<td align="right">1.6233</td>
<td align="right">0.2181</td>
<td align="right">2.2213</td>
<td align="right">0.0263</td>
<td align="right">1.0595</td>
<td align="right">2.4937</td>
</tr>
<tr class="even">
<td align="left">p_tumor.C</td>
<td align="right">0.9408</td>
<td align="right">0.2201</td>
<td align="right">-0.2770</td>
<td align="right">0.7818</td>
<td align="right">0.6076</td>
<td align="right">1.4422</td>
</tr>
<tr class="odd">
<td align="left">p_tumor^4</td>
<td align="right">0.9705</td>
<td align="right">0.2013</td>
<td align="right">-0.1489</td>
<td align="right">0.8816</td>
<td align="right">0.6541</td>
<td align="right">1.4417</td>
</tr>
<tr class="even">
<td align="left">op_duration_min</td>
<td align="right">1.2011</td>
<td align="right">0.1031</td>
<td align="right">1.7764</td>
<td align="right">0.0757</td>
<td align="right">0.9829</td>
<td align="right">1.4735</td>
</tr>
<tr class="odd">
<td align="left">norepinephrineyes</td>
<td align="right">0.7220</td>
<td align="right">0.1846</td>
<td align="right">-1.7646</td>
<td align="right">0.0776</td>
<td align="right">0.5026</td>
<td align="right">1.0373</td>
</tr>
<tr class="even">
<td align="left">gender_female</td>
<td align="right">1.0356</td>
<td align="right">0.0909</td>
<td align="right">0.3851</td>
<td align="right">0.7002</td>
<td align="right">0.8659</td>
<td align="right">1.2371</td>
</tr>
<tr class="odd">
<td align="left">blood_loss_ratio_x_preop_hb</td>
<td align="right">1.2619</td>
<td align="right">0.1335</td>
<td align="right">1.7424</td>
<td align="right">0.0814</td>
<td align="right">0.9712</td>
<td align="right">1.6391</td>
</tr>
<tr class="even">
<td align="left">blood_loss_ratio_x_gender_female</td>
<td align="right">1.3443</td>
<td align="right">0.1453</td>
<td align="right">2.0370</td>
<td align="right">0.0417</td>
<td align="right">1.0182</td>
<td align="right">1.8011</td>
</tr>
</tbody>
</table>
</div>
<div id="estimated-marginal-means" class="section level5">
<h5><span class="header-section-number">3.2.1.1.3</span> Estimated marginal means</h5>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="left">contrast</th>
<th align="right">null.value</th>
<th align="right">odds.ratio</th>
<th align="right">std.error</th>
<th align="right">df</th>
<th align="right">z.ratio</th>
<th align="right">adj.p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">p_tumor</td>
<td align="left">1 / 0</td>
<td align="right">0</td>
<td align="right">0.8197</td>
<td align="right">0.2755</td>
<td align="right">Inf</td>
<td align="right">-0.5914</td>
<td align="right">0.8987</td>
</tr>
<tr class="even">
<td align="left">p_tumor</td>
<td align="left">2 / 0</td>
<td align="right">0</td>
<td align="right">0.9086</td>
<td align="right">0.2513</td>
<td align="right">Inf</td>
<td align="right">-0.3466</td>
<td align="right">0.9710</td>
</tr>
<tr class="odd">
<td align="left">p_tumor</td>
<td align="left">3 / 0</td>
<td align="right">0</td>
<td align="right">1.4016</td>
<td align="right">0.3527</td>
<td align="right">Inf</td>
<td align="right">1.3415</td>
<td align="right">0.4648</td>
</tr>
<tr class="even">
<td align="left">p_tumor</td>
<td align="left">4 / 0</td>
<td align="right">0</td>
<td align="right">2.4106</td>
<td align="right">0.7884</td>
<td align="right">Inf</td>
<td align="right">2.6905</td>
<td align="right">0.0260</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="left">contrast</th>
<th align="right">null.value</th>
<th align="right">odds.ratio</th>
<th align="right">std.error</th>
<th align="right">df</th>
<th align="right">z.ratio</th>
<th align="right">adj.p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">p_tumor</td>
<td align="left">1 / 0</td>
<td align="right">0</td>
<td align="right">0.8197</td>
<td align="right">0.2755</td>
<td align="right">Inf</td>
<td align="right">-0.5914</td>
<td align="right">0.9421</td>
</tr>
<tr class="even">
<td align="left">p_tumor</td>
<td align="left">2 / 1</td>
<td align="right">0</td>
<td align="right">1.1084</td>
<td align="right">0.3611</td>
<td align="right">Inf</td>
<td align="right">0.3158</td>
<td align="right">0.9938</td>
</tr>
<tr class="odd">
<td align="left">p_tumor</td>
<td align="left">3 / 2</td>
<td align="right">0</td>
<td align="right">1.5426</td>
<td align="right">0.3727</td>
<td align="right">Inf</td>
<td align="right">1.7941</td>
<td align="right">0.2353</td>
</tr>
<tr class="even">
<td align="left">p_tumor</td>
<td align="left">4 / 3</td>
<td align="right">0</td>
<td align="right">1.7199</td>
<td align="right">0.5044</td>
<td align="right">Inf</td>
<td align="right">1.8492</td>
<td align="right">0.2111</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="left">contrast</th>
<th align="right">null.value</th>
<th align="right">odds.ratio</th>
<th align="right">std.error</th>
<th align="right">df</th>
<th align="right">z.ratio</th>
<th align="right">adj.p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">p_tumor</td>
<td align="left">0|1</td>
<td align="right">0</td>
<td align="right">1.2595</td>
<td align="right">0.2906</td>
<td align="right">Inf</td>
<td align="right">1.0000</td>
<td align="right">0.6774</td>
</tr>
<tr class="even">
<td align="left">p_tumor</td>
<td align="left">1|2</td>
<td align="right">0</td>
<td align="right">1.6052</td>
<td align="right">0.3294</td>
<td align="right">Inf</td>
<td align="right">2.3060</td>
<td align="right">0.0659</td>
</tr>
<tr class="odd">
<td align="left">p_tumor</td>
<td align="left">2|3</td>
<td align="right">0</td>
<td align="right">2.0278</td>
<td align="right">0.4051</td>
<td align="right">Inf</td>
<td align="right">3.5389</td>
<td align="right">0.0015</td>
</tr>
<tr class="even">
<td align="left">p_tumor</td>
<td align="left">3|4</td>
<td align="right">0</td>
<td align="right">2.3849</td>
<td align="right">0.6594</td>
<td align="right">Inf</td>
<td align="right">3.1435</td>
<td align="right">0.0058</td>
</tr>
</tbody>
</table>
</div>
<div id="binned-residuals" class="section level5">
<h5><span class="header-section-number">3.2.1.1.4</span> Binned residuals</h5>
<pre><code>#&gt; Ok: About 95% of the residuals are inside the error bounds.</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_binnedresiduals-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="variance-inflation-factor" class="section level5">
<h5><span class="header-section-number">3.2.1.1.5</span> Variance inflation factor</h5>
<pre><code>#&gt;                                      GVIF Df GVIF^(1/(2*Df))
#&gt; blood_loss_ratio                 1.467803  1        1.211529
#&gt; oak                              1.040799  1        1.020196
#&gt; preop_hb                         1.321543  1        1.149584
#&gt; age                              1.180337  1        1.086433
#&gt; p_tumor                          1.154516  4        1.018122
#&gt; op_duration_min                  1.326033  1        1.151535
#&gt; norepinephrine                   1.071437  1        1.035102
#&gt; gender_female                    1.090726  1        1.044378
#&gt; blood_loss_ratio_x_preop_hb      1.109232  1        1.053201
#&gt; blood_loss_ratio_x_gender_female 1.137761  1        1.066659</code></pre>
</div>
<div id="hosmer" class="section level5">
<h5><span class="header-section-number">3.2.1.1.6</span> Hosmer</h5>
<pre><code>#&gt; $C
#&gt; 
#&gt;  Hosmer-Lemeshow C statistic
#&gt; 
#&gt; data:  fit.glm %&gt;% pull_workflow_fit() %&gt;% pluck(&quot;fit&quot;, &quot;fitted.values&quot;) and helper.glm_datamatrix[, &quot;..y&quot;]
#&gt; X-squared = 6.2741, df = 8, p-value = 0.6166
#&gt; 
#&gt; 
#&gt; $H
#&gt; 
#&gt;  Hosmer-Lemeshow H statistic
#&gt; 
#&gt; data:  fit.glm %&gt;% pull_workflow_fit() %&gt;% pluck(&quot;fit&quot;, &quot;fitted.values&quot;) and helper.glm_datamatrix[, &quot;..y&quot;]
#&gt; X-squared = 13.359, df = 8, p-value = 0.1001
#&gt; 
#&gt; 
#&gt; $gof
#&gt; 
#&gt;  le Cessie-van Houwelingen-Copas-Hosmer global goodness of fit test
#&gt; 
#&gt; data:  fit.glm %&gt;% pull_workflow_fit() %&gt;% pluck(&quot;fit&quot;, &quot;fitted.values&quot;) and helper.glm_datamatrix[, &quot;..y&quot;]
#&gt; z = -0.63511, p-value = 0.5254</code></pre>
</div>
</div>
<div id="calibration-plot" class="section level4">
<h4><span class="header-section-number">3.2.1.2</span> Calibration plot</h4>
<p><img src="notebook_files/figure-html/ml_glm_calibration-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; $m
#&gt; [1] 2
#&gt; 
#&gt; $p.value
#&gt; [1] 0.2396317</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_calibration-2.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; $m
#&gt; [1] 1
#&gt; 
#&gt; $p.value
#&gt; [1] 0.9361738</code></pre>
</div>
<div id="counterfactual-predictions" class="section level4">
<h4><span class="header-section-number">3.2.1.3</span> Counterfactual predictions</h4>
<pre><code>#&gt; [[1]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[2]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-2.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[3]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-3.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[4]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-4.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[5]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-5.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[6]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-6.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[7]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-7.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[8]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-8.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[9]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-9.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[10]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-10.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[11]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-11.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[12]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-12.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[13]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-13.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[14]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-14.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[15]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-15.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; 
#&gt; [[16]]</code></pre>
<p><img src="notebook_files/figure-html/ml_glm_cf_preds-16.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="nomogram" class="section level4">
<h4><span class="header-section-number">3.2.1.4</span> Nomogram</h4>
<p><img src="notebook_files/figure-html/ml_glm_nomogram-1.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; Points per unit of linear predictor: 9.69036 
#&gt; Linear predictor units per point   : 0.1031953 
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=80) Points
#&gt;  0.0                                        59    
#&gt;  0.1                                        65    
#&gt;  0.2                                        71    
#&gt;  0.3                                        78    
#&gt;  0.4                                        84    
#&gt;  0.5                                        90    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=80) Points
#&gt;  0.0                                           50   
#&gt;  0.1                                           60   
#&gt;  0.2                                           70   
#&gt;  0.3                                           80   
#&gt;  0.4                                           90   
#&gt;  0.5                                          100   
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=90) Points
#&gt;  0.0                                        50    
#&gt;  0.1                                        58    
#&gt;  0.2                                        65    
#&gt;  0.3                                        72    
#&gt;  0.4                                        79    
#&gt;  0.5                                        86    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=90) Points
#&gt;  0.0                                          42    
#&gt;  0.1                                          53    
#&gt;  0.2                                          63    
#&gt;  0.3                                          74    
#&gt;  0.4                                          85    
#&gt;  0.5                                          96    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=100) Points
#&gt;  0.0                                         42    
#&gt;  0.1                                         50    
#&gt;  0.2                                         58    
#&gt;  0.3                                         66    
#&gt;  0.4                                         74    
#&gt;  0.5                                         83    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=100) Points
#&gt;  0.0                                           33    
#&gt;  0.1                                           45    
#&gt;  0.2                                           57    
#&gt;  0.3                                           69    
#&gt;  0.4                                           80    
#&gt;  0.5                                           92    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=110) Points
#&gt;  0.0                                         34    
#&gt;  0.1                                         43    
#&gt;  0.2                                         52    
#&gt;  0.3                                         61    
#&gt;  0.4                                         70    
#&gt;  0.5                                         79    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=110) Points
#&gt;  0.0                                           25    
#&gt;  0.1                                           38    
#&gt;  0.2                                           50    
#&gt;  0.3                                           63    
#&gt;  0.4                                           76    
#&gt;  0.5                                           88    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=120) Points
#&gt;  0.0                                         25    
#&gt;  0.1                                         35    
#&gt;  0.2                                         45    
#&gt;  0.3                                         55    
#&gt;  0.4                                         65    
#&gt;  0.5                                         75    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=120) Points
#&gt;  0.0                                           17    
#&gt;  0.1                                           30    
#&gt;  0.2                                           44    
#&gt;  0.3                                           57    
#&gt;  0.4                                           71    
#&gt;  0.5                                           84    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=130) Points
#&gt;  0.0                                         17    
#&gt;  0.1                                         28    
#&gt;  0.2                                         39    
#&gt;  0.3                                         49    
#&gt;  0.4                                         60    
#&gt;  0.5                                         71    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=130) Points
#&gt;  0.0                                            8    
#&gt;  0.1                                           23    
#&gt;  0.2                                           37    
#&gt;  0.3                                           52    
#&gt;  0.4                                           66    
#&gt;  0.5                                           81    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=male preop_hb=140) Points
#&gt;  0.0                                          9    
#&gt;  0.1                                         20    
#&gt;  0.2                                         32    
#&gt;  0.3                                         44    
#&gt;  0.4                                         55    
#&gt;  0.5                                         67    
#&gt; 
#&gt; 
#&gt;  blood_loss_ratio (gender=female preop_hb=140) Points
#&gt;  0.0                                            0    
#&gt;  0.1                                           15    
#&gt;  0.2                                           31    
#&gt;  0.3                                           46    
#&gt;  0.4                                           61    
#&gt;  0.5                                           77    
#&gt; 
#&gt; 
#&gt;  age Points
#&gt;   10  0    
#&gt;   20  4    
#&gt;   30  8    
#&gt;   40 12    
#&gt;   50 16    
#&gt;   60 20    
#&gt;   70 24    
#&gt;   80 28    
#&gt;   90 32    
#&gt;  100 36    
#&gt; 
#&gt; 
#&gt;  op_duration_min Points
#&gt;   100             0    
#&gt;   200             2    
#&gt;   300             3    
#&gt;   400             5    
#&gt;   500             6    
#&gt;   600             8    
#&gt;   700             9    
#&gt;   800            11    
#&gt;   900            12    
#&gt;  1000            14    
#&gt; 
#&gt; 
#&gt;  oak Points
#&gt;  no   0    
#&gt;  yes 10    
#&gt; 
#&gt; 
#&gt;  p_tumor Points
#&gt;  0       0     
#&gt;  1       1     
#&gt;  2       0     
#&gt;  3       4     
#&gt;  4       9     
#&gt; 
#&gt; 
#&gt;  norepinephrine Points
#&gt;  no             3     
#&gt;  yes            0     
#&gt; 
#&gt; 
#&gt;  Total Points Probability of transfusion
#&gt;            20                      0.001
#&gt;            43                      0.010
#&gt;            59                      0.050
#&gt;            66                      0.100
#&gt;            74                      0.200
#&gt;            79                      0.300
#&gt;            83                      0.400
#&gt;            87                      0.500
#&gt;            91                      0.600
#&gt;            96                      0.700
#&gt;           101                      0.800
#&gt;           109                      0.900
#&gt;           116                      0.950
#&gt;           132                      0.990
#&gt;           154                      0.999</code></pre>
</div>
<div id="elastic-net-logistic-regression" class="section level4">
<h4><span class="header-section-number">3.2.1.5</span> Elastic Net Logistic Regression</h4>
</div>
<div id="random-forest" class="section level4">
<h4><span class="header-section-number">3.2.1.6</span> Random Forest</h4>
</div>
<div id="support-vector-machine-rbf" class="section level4">
<h4><span class="header-section-number">3.2.1.7</span> Support Vector Machine (RBF)</h4>
<!-- #### eXtreme Gradient Boosting Machine -->
</div>
<div id="model-performance-1" class="section level4">
<h4><span class="header-section-number">3.2.1.8</span> Model performance</h4>
</div>
<div id="feature-importance" class="section level4">
<h4><span class="header-section-number">3.2.1.9</span> Feature importance</h4>
</div>
<div id="optimal-cutpoint" class="section level4">
<h4><span class="header-section-number">3.2.1.10</span> Optimal cutpoint</h4>
<!-- Cutpoint by absolute distance to optimal model (sensitivity and specificity = 1) -->
<!-- Cutpoint by sensitivity and specificity -->
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="prerequisites.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="methods.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["notebook.pdf", "PDF"]],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": false,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
